---
title       : "R 강의"
subtitle    : "두번째 시간"
author      : "김형준"
job         : "Data Analyst"
fframework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets    : [mathjax]
#ext_widgets: {rCharts: [libraries/nvd3]}           # {mathjax, quiz,bootstra}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

## Contents

3. 데이터 핸들링
4. 기술 통계
5. Graph & Visualization

--- .class #id

### filter: Keep rows Matching Criteria

```{r}
suppressMessages(library(dplyr))
library(hflights)
flights <- tbl_df(hflights)
flights %>% filter(Month==1, DayofMonth==1)
```

---

### select: Pick columns by name

```{r, eval=F}
flights %>% select(DepTime, ArrTime, FlightNum)
```

### arrange: Reorder Rows

```{r}
flights %>% 
    select(UniqueCarrier, DepDelay) %>%
        arrange(DepDelay) # arrange(desc(DepDelay))
```

---

### mutate: Add New Variables
```{r}
flights %>%
    group_by(Dest) %>%
    summarise(avg_delay = mean(ArrDelay, na.rm=TRUE))%>%slice(1:2)
```

---
    
```{r}
a = flights %>%
    group_by(UniqueCarrier) %>%
    summarise(mean_Cancelled = mean(Cancelled),mean_Diverted = mean(Diverted))
a%>%slice(1:3)
```

```{r}
b = flights %>%
    group_by(UniqueCarrier) %>%
    summarise_each(funs(mean), Cancelled, Diverted)
colnames(a) = colnames(b)
all.equal(a,b)
```

---


=======
### 주의 사항
```{r}
a = 1:2; b = 3:5; c = 2:5
cbind(a,b)
rbind(a,c)
```

---

```{r}
library("hflights")
dim(hflights); nrow(hflights); ncol(hflights)
colnames(hflights); #range(rownames(hflights))
```

---

## 기술 통계

    자료의 특성을 표, 그림, 통계량 등을 사용하여 쉽게 파악할 수 있도록 정리요약

- 평균 (mean) / 중앙값 (median) / 합계 (sum)
- 분산 (variance) / 표준편차 (sd)
- 범위 (range)
- 상관 (cor)

---

```{r}
mean(hflights[,"DepTime"]) # 평균-> NA
mean(hflights[,"DepTime"],na.rm=T) # 평균(missing 제거)
```   

```{r, eval=F}
sapply(hflights,is.numeric) ## Numeric or not
sapply(hflights[,sapply(hflights,is.numeric)],mean)
sapply(hflights[,sapply(hflights,is.numeric)],function(x) mean(x, na.rm=T))
```   


---


```{r boxplot1, eval=T}
boxplot(hflights[,sapply(hflights,is.numeric)])
```


---

```{r boxplot2, eval=T}
col_sel = colnames(hflights)[sapply(hflights,is.numeric)]
boxplot(hflights[,col_sel], xaxt="n")
text(x =  1:length(col_sel), y = par("usr")[3] - 1, srt = 90, adj = 1,
     labels = col_sel, xpd=T)
```

---

```{r, eval=F}
library("reshape")
hflights_df = hflights[,sapply(hflights,is.numeric)]
hflights_df[,"id"] = 1:nrow(hflights_df)
#head(hflights_df)
hflights_df_m = melt(hflights_df,id="id")
library(ggplot2)
ggplot(hflights_df_m) +
geom_boxplot(aes(x=variable, y=value))+ 
xlab("")+
theme(text=element_text(size=10),
axis.text.x = element_text(angle = 90, size = 14, hjust=1))
print(paste("# of Missing is", sum(is.na(hflights_df))))
```

---

```{r ggplot1, echo=F, eval=T}
library("reshape")
hflights_df = hflights[,sapply(hflights,is.numeric)]
hflights_df[,"id"] = 1:nrow(hflights_df)
#head(hflights_df)
hflights_df_m = melt(hflights_df,id="id")
library(ggplot2)
ggplot(hflights_df_m) +
geom_boxplot(aes(x=variable, y=value))+ 
xlab("")+
theme(text=element_text(size=10),
axis.text.x = element_text(angle = 90, size = 14, hjust=1))
print(paste("# of Missing is", sum(is.na(hflights_df))))
```
>>>>>>> master
